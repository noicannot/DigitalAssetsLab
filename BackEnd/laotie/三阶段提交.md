## 三阶段提交（3PC）

---

### 前言

> 三阶段提交协议（3PC）主要是为了解决两阶段提交协议的阻塞问题，2pc存在的问题是当协作者崩溃时，参与者不能做出最后的选择。因此参与者可能在协作者恢复之前保持阻塞。三阶段提交（Three-phase commit），是二阶段提交（2PC）的改进版本。

### 改动点

> - 引入超时机制。同时在协调者和参与者中都引入超时机制。
> - 在第一阶段和第二阶段中插入一个准备阶段。保证了在最后提交阶段之前各参与节点的状态是一致的

### 第一阶段

> 和2PC第一阶段不同的是，执行完事务后不提交，并尝试获取数据库锁。
