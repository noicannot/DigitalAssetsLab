## 定义

零知识证明(Zero—Knowledge Proof)，是由S.Goldwasser、S.Micali及C.Rackoff在20世纪80年代初提出的。它指的是证明者能够在不向验证者提供任何有用的信息的情况下，使验证者相信某个论断是正确的。

简单的说，就是你向我陈述一件事情，虽然我听不懂你在说什么，但我可以判断这事情的真假。

举个例子，假设A是色盲，A想知道B是不是色盲，但问题是A本身都分不清红绿，如何判断B能否分清呢？方法可以是这样：A一手拿红球、一手拿绿球，给B看并请他指出那颗是红球，然后A把两手放到背后交换(或不交换)，再拿给B看也请他再指出那颗是红球，这样的过程重覆100次，如果B每次都能指出同一颗球(只有A知道有没有在背后作两颗球的交换)，就可以大概率判定B不是色盲，而即便到最后，A还是无法判断红绿(零知识).

零知识证明(Zero—Knowledge Proof)起源于最小泄露证明。设P表示掌握某些信息，并希望证实这一事实的实体，设V是证明这一事实的实体。假如某个协议向V证明P的确掌握某些信息，但V无法推断出这些信息是什么，我们称P实现了最小泄露证明。不仅如此，如果V除了知道P能够证明某一事实外，不能够得到其他任何知识，我们称P实现了零知识证明，相应的协议称作零知识协议。

零知识证明解决了信任与隐私的矛盾：既通过「证明」提升「信任」，又通过「零知识」保护「隐私」。是两全其美的方案。

## **零知识证明的源头**

零知识证明是1984年由Goldwasser、Micali、Rackoff三个人提出，论文题目是《The Knowledge Complextiy of Interactive Proof Systems》（《交互式证明系统中的知识复杂性》）。

## 三个性质

**完备性**（Completeness）

只要证明者拥有相应的知识，那么就能通过验证者的验证，即证明者有足够大的概率使验证者确信。
P无法欺骗V。换言之，若P不知道一个定理的证明方法，则P使V相信他会证明定理的概率很低。

**可靠性**（Soundness）

如果证明者没有相应的知识，则无法通过验证者的验证，即证明者欺骗验证者的概率可以忽略。
V无法欺骗P。若P知道一个定理的证明方法，则P使V以绝对优势的概率相信他能证明。

**零知识性**（Zero-Knowledge）

证明者在交互过程中仅向验证者透露是否拥有相应知识的陈述，**不会泄露任何关于知识的额外信息**。
V无法获取任何额外的知识。


我们把性质(1)和(2)称为零知识证明的正确性和完备性，而性质(3)称为零知识性。

## 零知识证明的核心价值：消灭可信第三方。

当互联⽹电⼦商务和在线交易蓬勃发展到今天，可信第三方（TTP，Trusted Third Party）几乎不可或缺。但大家体会不到的事实是，可信第三方引入了巨大的「信任成本」。对第三方的过度信任，会带来严重的「隐私泄露」、「单点失效」、「个⼈信息滥⽤」等问题。

我们可以从另⼀个⻆度来理解中本聪的创新：比特币实现了⼀种分布式协议，它以去中心化的方式，「模拟」出了一个「虚拟」的「可信第三⽅」。

而对于零知识证明也可以这样理解：零知识证明实现了一类密码学理论技术，它基于一些安全假设，「模拟」出了⼀个虚拟的可信第三方。

可见，「零知识证明」的一个重要作用是消灭可信第三方。换句话说，零知识证明提供的「信任」，能够代替一个「可信第三方」。

需要注意的是：「零知识证明」取代的并非是「第三方」，而是「可信第三方」。

球的例子中的零知识证明，是一种**基于概率的验证方式（即概率证明，而非确定性证明）**，验证者（verifier）基于一定的随机性向证明者（prover)提出问题，如果证明者都能给出正确回答，则说明证明者大概率拥有他所声称的“知识”。

看看这个示例是如何满足零知识证明的定义中的**三性**：

**完备性**

如果Bob拥有分辨球颜色的知识，则Bob每次都会正确回答。

**可靠性**

如果Bob不具备分辨球颜色的知识，则Bob无法总是回答正确。

**零知识性**

直到最后，Alice也无法得知两球的具体颜色，因为Bob从未透露这个信息。

零知识证明并不是数学意义上的证明，因为它存在小概率的误差，欺骗者有可能通过虚假陈述骗过证明者。换句话来说，零知识证明是概率证明而不是确定性证明。但是也存在有技术能将误差降低到可以忽略的值。

零知识的形式定义必须使用一些计算模型，最常见的是图灵机的计算模型。

## 举例

1、A要向B证明自己拥有某个房间的钥匙，假设该房间只能用钥匙打开锁，而其他任何方法都打不开。这时有2个方法：

①A把钥匙出示给B，B用这把钥匙打开该房间的锁，从而证明A拥有该房间的正确的钥匙。

②B确定该房间内有某一物体，A用自己拥有的钥匙打开该房间的门，然后把物体拿出来出示给B，从而证明自己确实拥有该房间的钥匙。

后面的②方法属于零知识证明。它的好处在于，在整个证明的过程中，B始终不能看到钥匙的样子，从而避免了钥匙的泄露。

2、A拥有B的公钥，A没有见过B，而B见过A的照片，偶然一天两个人见面了，B认出了A，但A不能确定面前的人是否是B，这时B要向A证明自己是B，也有2个方法。

① B把自己的私钥给A，A用公钥对某个数据加密，然后用B的私钥解密，如果正确，则证明对方确实是B。

② A给出一个随机值，并使用B的公钥对其加密，然后将加密后的数据交给B，B用自己的私钥解密并展示给A，如果与A给出的随机值相同，则证明对方是B。

后面的方法属于零知识证明。

## 零知识证明是零信任吗

零知识证明和零信任这两个词，都带有“零”，都与“信任”有关，但并不是一回事。两者本质上都要增强「信任」，但在增强「信任」的过程中，零知识证明强调不泄露知识；零信任强调不要过度授权。简单说，零知识是为了隐藏知识；零信任是为了控制信任。

## 零知识证明分类

到目前为止，具有应用前景的零知识证明工具可以分类两类：

- 一类证明慢、验证快、证明体积小
- 另一类证明快、验证快、证明体积小大

第一类由于验证快，不占用空间的特点，很快得到区块链开发者的青睐，同时随着ZCash的迅速传播，其使用的zk-SNARKs协议也越来越受关注。

第二类证明快的特点使得其在移动设备，嵌入式设备的部署成为可能，而隔离见证等技术有望缓解其证明体积较大的问题，在区块链领域的也是前途无量。